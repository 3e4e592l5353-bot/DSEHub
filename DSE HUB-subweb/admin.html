<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSE Hub - ç®¡ç†å‘˜å®¡æ ¸ç³»ç»Ÿ</title>
    <style>
        :root {
            /* è“ç´«ä¸»é¢˜ (ç®¡ç†å‘˜ä¸“ç”¨æ·±è‰²ä¸»é¢˜) */
            --primary-start: #667eea;
            --primary-end: #764ba2;
            --accent-color: #5a67d8;
            --accent-light: rgba(90, 103, 216, 0.1);
            --accent-dark: #4c51bf;
            --danger-color: #e53e3e;
            --danger-light: rgba(229, 62, 62, 0.1);
            --warning-color: #d69e2e;
            --warning-light: rgba(214, 158, 46, 0.1);
            --success-color: #38a169;
            --success-light: rgba(56, 161, 105, 0.1);
            --info-color: #4299e1;
            
            /* æ–‡æœ¬é¢œè‰² */
            --text-color: #2d3748;
            --text-secondary: #718096;
            --text-muted: #a0aec0;
            --text-light: #f7fafc;
            
            /* èƒŒæ™¯ä¸è¾¹æ¡† */
            --bg-primary: #f8f9fa;
            --bg-secondary: #ffffff;
            --bg-dark: #2d3748;
            --card-bg: rgba(255, 255, 255, 0.98);
            --border-color: rgba(102, 126, 234, 0.15);
            --hover-color: rgba(102, 126, 234, 0.06);
            
            /* é—´è·ç³»ç»Ÿ */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 12px;
            --spacing-lg: 16px;
            --spacing-xl: 24px;
            
            /* åœ†è§’ç³»ç»Ÿ */
            --border-radius-sm: 8px;
            --border-radius-md: 12px;
            --border-radius-lg: 16px;
            --border-radius-xl: 20px;
            
            /* é˜´å½±ç³»ç»Ÿ */
            --shadow-sm: 0 2px 8px rgba(102, 126, 234, 0.08);
            --shadow-md: 0 4px 16px rgba(102, 126, 234, 0.12);
            --shadow-lg: 0 8px 32px rgba(102, 126, 234, 0.16);
            --shadow-xl: 0 12px 48px rgba(102, 126, 234, 0.2);
            
            /* è¿‡æ¸¡æ—¶é—´ */
            --transition-fast: 0.2s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            color: var(--text-color);
            background: var(--bg-primary);
            line-height: 1.6;
        }
        
        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--spacing-xl);
        }
        
        /* å¤´éƒ¨æ ·å¼ */
        .admin-header {
            background: linear-gradient(135deg, var(--primary-start), var(--primary-end));
            color: white;
            padding: var(--spacing-xl);
            border-radius: var(--border-radius-xl);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }
        
        .admin-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%);
            pointer-events: none;
        }
        
        .admin-header h1 {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: var(--spacing-sm);
            position: relative;
            z-index: 1;
        }
        
        .admin-header p {
            font-size: 16px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }
        
        .stat-card {
            background: var(--card-bg);
            padding: var(--spacing-xl);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-color);
            transition: all var(--transition-normal);
        }
        
        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .stat-card.pending {
            border-top: 4px solid var(--warning-color);
        }
        
        .stat-card.approved {
            border-top: 4px solid var(--success-color);
        }
        
        .stat-card.rejected {
            border-top: 4px solid var(--danger-color);
        }
        
        .stat-card.users {
            border-top: 4px solid var(--accent-color);
        }
        
        .stat-number {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            color: var(--text-color);
        }
        
        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* æ ‡ç­¾é¡µæ ·å¼ */
        .admin-tabs {
            display: flex;
            background: var(--bg-secondary);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-sm);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--shadow-sm);
            overflow-x: auto;
            gap: var(--spacing-sm);
        }
        
        .tab-btn {
            padding: var(--spacing-md) var(--spacing-xl);
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 15px;
            border-radius: var(--border-radius-md);
            cursor: pointer;
            transition: all var(--transition-normal);
            white-space: nowrap;
        }
        
        .tab-btn:hover {
            background: var(--hover-color);
            color: var(--text-color);
        }
        
        .tab-btn.active {
            background: linear-gradient(135deg, var(--primary-start), var(--primary-end));
            color: white;
            box-shadow: var(--shadow-md);
        }
        
        /* å†…å®¹åŒºåŸŸ */
        .tab-content {
            display: none;
            animation: fadeIn var(--transition-normal);
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* å®¡æ ¸å¡ç‰‡æ ·å¼ */
        .review-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
        }
        
        .review-card {
            background: var(--card-bg);
            border-radius: var(--border-radius-xl);
            padding: var(--spacing-xl);
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-color);
            transition: all var(--transition-normal);
            position: relative;
        }
        
        .review-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .review-card.pending {
            border-left: 4px solid var(--warning-color);
        }
        
        .review-card.approved {
            border-left: 4px solid var(--success-color);
        }
        
        .review-card.rejected {
            border-left: 4px solid var(--danger-color);
        }
        
        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--border-color);
        }
        
        .review-type {
            display: inline-block;
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--border-radius-sm);
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .review-type.submission {
            background: var(--accent-light);
            color: var(--accent-color);
        }
        
        .review-type.question {
            background: var(--info-light);
            color: var(--info-color);
        }
        
        .review-type.feedback {
            background: var(--warning-light);
            color: var(--warning-color);
        }
        
        .review-status {
            font-size: 12px;
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--border-radius-sm);
            font-weight: 600;
        }
        
        .status-pending {
            background: var(--warning-light);
            color: var(--warning-color);
        }
        
        .status-approved {
            background: var(--success-light);
            color: var(--success-color);
        }
        
        .status-rejected {
            background: var(--danger-light);
            color: var(--danger-color);
        }
        
        .review-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            color: var(--text-color);
        }
        
        .review-content {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: var(--spacing-lg);
            max-height: 100px;
            overflow: hidden;
            position: relative;
        }
        
        .review-content.expanded {
            max-height: none;
        }
        
        .expand-btn {
            background: none;
            border: none;
            color: var(--accent-color);
            font-size: 13px;
            cursor: pointer;
            padding: var(--spacing-xs);
            margin-top: var(--spacing-xs);
        }
        
        .review-meta {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: var(--spacing-lg);
        }
        
        .review-actions {
            display: flex;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-lg);
        }
        
        .action-btn {
            flex: 1;
            padding: var(--spacing-md) var(--spacing-lg);
            border: none;
            border-radius: var(--border-radius-md);
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
        }
        
        .approve-btn {
            background: var(--success-color);
            color: white;
        }
        
        .approve-btn:hover {
            background: #2f855a;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .reject-btn {
            background: var(--danger-color);
            color: white;
        }
        
        .reject-btn:hover {
            background: #c53030;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .re-review-btn {
            background: var(--warning-color);
            color: white;
        }
        
        .re-review-btn:hover {
            background: #b7791f;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        /* ç”¨æˆ·ç®¡ç†è¡¨æ ¼ */
        .users-table-container {
            background: var(--card-bg);
            border-radius: var(--border-radius-xl);
            padding: var(--spacing-xl);
            box-shadow: var(--shadow-md);
            overflow-x: auto;
        }
        
        .users-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        
        .users-table th {
            text-align: left;
            padding: var(--spacing-md) var(--spacing-lg);
            background: var(--accent-light);
            color: var(--accent-color);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid var(--border-color);
        }
        
        .users-table td {
            padding: var(--spacing-md) var(--spacing-lg);
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
        }
        
        .users-table tr:hover {
            background: var(--hover-color);
        }
        
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-start), var(--primary-end));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
        }
        
        .user-status {
            display: inline-block;
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--border-radius-sm);
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-admin {
            background: var(--accent-light);
            color: var(--accent-color);
        }
        
        .status-user {
            background: var(--success-light);
            color: var(--success-color);
        }
        
        /* å®¡æ ¸å†å² */
        .history-list {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }
        
        .history-item {
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-sm);
            border-left: 4px solid var(--accent-color);
        }
        
        .history-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--spacing-sm);
        }
        
        /* ç­›é€‰å™¨ */
        .filters {
            display: flex;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-xl);
            flex-wrap: wrap;
        }
        
        .filter-group {
            flex: 1;
            min-width: 200px;
        }
        
        .filter-label {
            display: block;
            margin-bottom: var(--spacing-sm);
            font-size: 14px;
            font-weight: 600;
            color: var(--text-secondary);
        }
        
        .filter-select {
            width: 100%;
            padding: var(--spacing-md);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-md);
            background: var(--bg-secondary);
            color: var(--text-color);
            font-size: 14px;
            transition: all var(--transition-normal);
        }
        
        .filter-select:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px var(--accent-light);
        }
        
        /* ç©ºçŠ¶æ€ */
        .empty-state {
            text-align: center;
            padding: var(--spacing-xl) * 2;
            color: var(--text-muted);
        }
        
        .empty-state-icon {
            font-size: 48px;
            margin-bottom: var(--spacing-lg);
            opacity: 0.5;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1200px) {
            .admin-container {
                padding: var(--spacing-lg);
            }
        }
        
        @media (max-width: 1024px) {
            .review-grid {
                grid-template-columns: 1fr;
            }
            
            .admin-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .admin-header h1 {
                font-size: 24px;
            }
            
            .admin-tabs {
                flex-direction: column;
            }
            
            .tab-btn {
                width: 100%;
                text-align: left;
            }
            
            .review-actions {
                flex-direction: column;
            }
            
            .admin-stats {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .admin-container {
                padding: var(--spacing-sm);
            }
            
            .review-card {
                padding: var(--spacing-lg);
            }
            
            .review-header {
                flex-direction: column;
                gap: var(--spacing-sm);
            }
            
            .filters {
                flex-direction: column;
            }
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: var(--spacing-xl) * 2;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border-color);
            border-top-color: var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* ç¡®è®¤å¯¹è¯æ¡† */
        .confirm-dialog {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-normal);
        }
        
        .confirm-dialog.active {
            opacity: 1;
            visibility: visible;
        }
        
        .confirm-content {
            background: var(--card-bg);
            border-radius: var(--border-radius-xl);
            padding: var(--spacing-xl);
            max-width: 400px;
            width: 90%;
            box-shadow: var(--shadow-xl);
            transform: translateY(20px);
            transition: transform var(--transition-normal);
        }
        
        .confirm-dialog.active .confirm-content {
            transform: translateY(0);
        }
        
        .confirm-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: var(--spacing-md);
            color: var(--text-color);
        }
        
        .confirm-message {
            color: var(--text-secondary);
            margin-bottom: var(--spacing-xl);
            line-height: 1.6;
        }
        
        .confirm-actions {
            display: flex;
            gap: var(--spacing-md);
            justify-content: flex-end;
        }
        
        .cancel-btn {
            padding: var(--spacing-md) var(--spacing-xl);
            border: 1px solid var(--border-color);
            background: transparent;
            color: var(--text-secondary);
            border-radius: var(--border-radius-md);
            cursor: pointer;
            font-weight: 600;
            transition: all var(--transition-normal);
        }
        
        .cancel-btn:hover {
            background: var(--hover-color);
            color: var(--text-color);
        }
        
        .confirm-btn {
            padding: var(--spacing-md) var(--spacing-xl);
            border: none;
            background: var(--danger-color);
            color: white;
            border-radius: var(--border-radius-md);
            cursor: pointer;
            font-weight: 600;
            transition: all var(--transition-normal);
        }
        
        .confirm-btn:hover {
            background: #c53030;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        /* é€šçŸ¥ */
        .notification {
            position: fixed;
            top: var(--spacing-xl);
            right: var(--spacing-xl);
            background: var(--success-color);
            color: white;
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-lg);
            z-index: 999;
            transform: translateX(100%);
            opacity: 0;
            transition: all var(--transition-normal);
            max-width: 300px;
        }
        
        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        .notification.error {
            background: var(--danger-color);
        }
        
        .notification.warning {
            background: var(--warning-color);
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- å¤´éƒ¨ -->
        <div class="admin-header">
            <h1>DSE Hub ç®¡ç†å‘˜å®¡æ ¸ç³»ç»Ÿ</h1>
            <p>ç‹¬æ–­ä¸‡å¤ä¹‹æƒæŸ„ï¼Œå®¡é˜…ä¸€åˆ‡å­˜åœ¨ä¹‹å†…å®¹</p>
        </div>
        
        <!-- ç»Ÿè®¡å¡ç‰‡ -->
        <div class="admin-stats">
            <div class="stat-card pending">
                <div class="stat-number" id="pending-count">0</div>
                <div class="stat-label">å¾…å®¡æ ¸å†…å®¹</div>
            </div>
            <div class="stat-card approved">
                <div class="stat-number" id="approved-count">0</div>
                <div class="stat-label">å·²é€šè¿‡å†…å®¹</div>
            </div>
            <div class="stat-card rejected">
                <div class="stat-number" id="rejected-count">0</div>
                <div class="stat-label">å·²æ‹’ç»å†…å®¹</div>
            </div>
            <div class="stat-card users">
                <div class="stat-number" id="users-count">0</div>
                <div class="stat-label">æ³¨å†Œç”¨æˆ·</div>
            </div>
        </div>
        
        <!-- æ ‡ç­¾é¡µ -->
        <div class="admin-tabs">
            <button class="tab-btn active" data-tab="pending">å¾…å®¡æ ¸</button>
            <button class="tab-btn" data-tab="submissions">æäº¤å†…å®¹</button>
            <button class="tab-btn" data-tab="questions">é¢˜ç›®</button>
            <button class="tab-btn" data-tab="feedback">ç•™è¨€åé¦ˆ</button>
            <button class="tab-btn" data-tab="users">ç”¨æˆ·ç®¡ç†</button>
            <button class="tab-btn" data-tab="history">å®¡æ ¸å†å²</button>
        </div>
        
        <!-- ç­›é€‰å™¨ -->
        <div class="filters">
            <div class="filter-group">
                <label class="filter-label">å†…å®¹ç±»å‹</label>
                <select class="filter-select" id="filter-type">
                    <option value="all">å…¨éƒ¨ç±»å‹</option>
                    <option value="submission">æäº¤å†…å®¹</option>
                    <option value="question">é¢˜ç›®</option>
                    <option value="feedback">ç•™è¨€åé¦ˆ</option>
                </select>
            </div>
            <div class="filter-group">
                <label class="filter-label">çŠ¶æ€</label>
                <select class="filter-select" id="filter-status">
                    <option value="pending">å¾…å®¡æ ¸</option>
                    <option value="all">å…¨éƒ¨çŠ¶æ€</option>
                    <option value="approved">å·²é€šè¿‡</option>
                    <option value="rejected">å·²æ‹’ç»</option>
                </select>
            </div>
            <div class="filter-group">
                <label class="filter-label">æ’åºæ–¹å¼</label>
                <select class="filter-select" id="filter-sort">
                    <option value="newest">æœ€æ–°ä¼˜å…ˆ</option>
                    <option value="oldest">æœ€æ—©ä¼˜å…ˆ</option>
                </select>
            </div>
        </div>
        
        <!-- å¾…å®¡æ ¸å†…å®¹ -->
        <div class="tab-content active" id="pending-content">
            <div class="review-grid" id="pending-grid">
                <!-- å†…å®¹ä¼šé€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>
        </div>
        
        <!-- æäº¤å†…å®¹ -->
        <div class="tab-content" id="submissions-content">
            <div class="review-grid" id="submissions-grid"></div>
        </div>
        
        <!-- é¢˜ç›® -->
        <div class="tab-content" id="questions-content">
            <div class="review-grid" id="questions-grid"></div>
        </div>
        
        <!-- ç•™è¨€åé¦ˆ -->
        <div class="tab-content" id="feedback-content">
            <div class="review-grid" id="feedback-grid"></div>
        </div>
        
        <!-- ç”¨æˆ·ç®¡ç† -->
        <div class="tab-content" id="users-content">
            <div class="users-table-container">
                <table class="users-table">
                    <thead>
                        <tr>
                            <th>ç”¨æˆ·</th>
                            <th>èº«ä»½</th>
                            <th>é‚®ç®±</th>
                            <th>æ³¨å†Œæ—¶é—´</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="users-table-body">
                        <!-- ç”¨æˆ·æ•°æ®ä¼šé€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- å®¡æ ¸å†å² -->
        <div class="tab-content" id="history-content">
            <div class="history-list" id="history-list">
                <!-- å®¡æ ¸å†å²ä¼šé€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>
        </div>
        
        <!-- ç©ºçŠ¶æ€ -->
        <div class="empty-state" id="empty-state" style="display: none;">
            <div class="empty-state-icon">ğŸ“„</div>
            <h3>æš‚æ— å†…å®¹</h3>
            <p>æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å†…å®¹</p>
        </div>
        
        <!-- åŠ è½½çŠ¶æ€ -->
        <div class="loading" id="loading-state">
            <div class="spinner"></div>
        </div>
    </div>
    
    <!-- ç¡®è®¤å¯¹è¯æ¡† -->
    <div class="confirm-dialog" id="confirm-dialog">
        <div class="confirm-content">
            <h3 class="confirm-title" id="confirm-title">ç¡®è®¤æ“ä½œ</h3>
            <p class="confirm-message" id="confirm-message"></p>
            <div class="confirm-actions">
                <button class="cancel-btn" id="cancel-btn">å–æ¶ˆ</button>
                <button class="confirm-btn" id="confirm-btn">ç¡®è®¤</button>
            </div>
        </div>
    </div>
    
    <!-- é€šçŸ¥ -->
    <div class="notification" id="notification"></div>

    <script>
        // å…¨å±€çŠ¶æ€ç®¡ç†
        const state = {
            currentUser: {
                id: 'admin-001',
                username: 'ç‹¬æ–­ä¸‡å¤çš„ç®¡ç†å‘˜',
                email: 'admin@dsehub.com',
                isAdmin: true
            },
            allItems: [],
            filteredItems: [],
            currentTab: 'pending',
            currentFilter: {
                type: 'all',
                status: 'pending',
                sort: 'newest'
            }
        };

        // æ¨¡æ‹Ÿæ•°æ® - åŸºäºæ‚¨çš„æ•°æ®åº“æ¶æ„
        const mockData = {
            submissions: [
                {
                    id: 'sub-001',
                    type: 'submission',
                    category: 'æ•°å­¦',
                    title: 'ä¸‰è§’å‡½æ•°çš„é«˜çº§åº”ç”¨',
                    content: 'æ¢è®¨ä¸‰è§’å‡½æ•°åœ¨ç‰©ç†å­¦å’Œå·¥ç¨‹å­¦ä¸­çš„å®é™…åº”ç”¨ï¼ŒåŒ…æ‹¬æ³¢å½¢åˆ†æå’Œä¿¡å·å¤„ç†...',
                    author: 'å¼ åŒå­¦',
                    authorId: 'user-001',
                    status: 'pending',
                    createdAt: '2024-01-15T10:30:00',
                    likeCount: 12,
                    viewCount: 45,
                    gameType: 'çŸ¥è¯†æŒ‘æˆ˜',
                    difficulty: 'é«˜çº§',
                    tags: ['æ•°å­¦', 'ä¸‰è§’å‡½æ•°', 'ç‰©ç†åº”ç”¨']
                },
                {
                    id: 'sub-002',
                    type: 'submission',
                    category: 'è‹±è¯­',
                    title: 'å•†åŠ¡è‹±è¯­å†™ä½œæŠ€å·§',
                    content: 'è¯¦ç»†è®²è§£å•†åŠ¡é‚®ä»¶ã€æŠ¥å‘Šå’Œæ¼”ç¤ºæ–‡ç¨¿çš„å†™ä½œæŠ€å·§...',
                    author: 'æè€å¸ˆ',
                    authorId: 'user-002',
                    status: 'approved',
                    createdAt: '2024-01-14T14:20:00',
                    likeCount: 28,
                    viewCount: 89
                }
            ],
            questions: [
                {
                    id: 'q-001',
                    type: 'question',
                    title: 'å¾®ç§¯åˆ†åŸºç¡€é¢˜',
                    content: 'è®¡ç®—å‡½æ•°f(x)=xÂ²åœ¨åŒºé—´[0,2]çš„å®šç§¯åˆ†å€¼',
                    gameType: 'æ•°å­¦æŒ‘æˆ˜',
                    subject: 'æ•°å­¦',
                    difficulty: 'åˆçº§',
                    status: 'pending',
                    createdAt: '2024-01-16T09:15:00',
                    playCount: 0,
                    successRate: 0,
                    author: 'ç‹åŒå­¦'
                }
            ],
            feedback: [
                {
                    id: 'fb-001',
                    type: 'feedback',
                    authorName: 'åŒ¿åç”¨æˆ·',
                    content: 'ç½‘ç«™æ•´ä½“è®¾è®¡å¾ˆæ£’ï¼Œä½†å¸Œæœ›å¢åŠ æ›´å¤šäº’åŠ¨åŠŸèƒ½',
                    status: 'pending',
                    createdAt: '2024-01-17T16:45:00',
                    visibility: 'public',
                    likeCount: 5
                }
            ],
            users: [
                {
                    id: 'user-001',
                    username: 'å¼ ä¸‰',
                    email: 'zhangsan@example.com',
                    isAdmin: false,
                    score: 2450,
                    gamesPlayed: 42,
                    highScore: 850,
                    createdAt: '2024-01-10T08:30:00'
                },
                {
                    id: 'user-002',
                    username: 'æå››',
                    email: 'lisi@example.com',
                    isAdmin: false,
                    score: 1800,
                    gamesPlayed: 28,
                    highScore: 720,
                    createdAt: '2024-01-11T14:20:00'
                },
                {
                    id: 'user-003',
                    username: 'ç‹è€å¸ˆ',
                    email: 'wang@example.com',
                    isAdmin: true,
                    score: 5000,
                    gamesPlayed: 156,
                    highScore: 1200,
                    createdAt: '2024-01-05T09:15:00'
                }
            ],
            reviewHistory: [
                {
                    id: 'rev-001',
                    itemId: 'sub-001',
                    itemType: 'submission',
                    itemTitle: 'ä¸‰è§’å‡½æ•°çš„é«˜çº§åº”ç”¨',
                    action: 'approved',
                    reviewer: 'ç‹¬æ–­ä¸‡å¤çš„ç®¡ç†å‘˜',
                    reviewedAt: '2024-01-15T11:00:00',
                    reason: 'å†…å®¹è´¨é‡ä¼˜ç§€ï¼Œç¬¦åˆè¦æ±‚'
                }
            ]
        };

        // DOMå…ƒç´ 
        const elements = {
            tabs: document.querySelectorAll('.tab-btn'),
            tabContents: document.querySelectorAll('.tab-content'),
            filterType: document.getElementById('filter-type'),
            filterStatus: document.getElementById('filter-status'),
            filterSort: document.getElementById('filter-sort'),
            pendingGrid: document.getElementById('pending-grid'),
            submissionsGrid: document.getElementById('submissions-grid'),
            questionsGrid: document.getElementById('questions-grid'),
            feedbackGrid: document.getElementById('feedback-grid'),
            usersTableBody: document.getElementById('users-table-body'),
            historyList: document.getElementById('history-list'),
            emptyState: document.getElementById('empty-state'),
            loadingState: document.getElementById('loading-state'),
            confirmDialog: document.getElementById('confirm-dialog'),
            confirmTitle: document.getElementById('confirm-title'),
            confirmMessage: document.getElementById('confirm-message'),
            cancelBtn: document.getElementById('cancel-btn'),
            confirmBtn: document.getElementById('confirm-btn'),
            notification: document.getElementById('notification'),
            stats: {
                pending: document.getElementById('pending-count'),
                approved: document.getElementById('approved-count'),
                rejected: document.getElementById('rejected-count'),
                users: document.getElementById('users-count')
            }
        };

        // å·¥å…·å‡½æ•°
        const utils = {
            formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleString('zh-CN');
            },
            
            truncateText(text, maxLength = 200) {
                if (text.length <= maxLength) return text;
                return text.substring(0, maxLength) + '...';
            },
            
            showNotification(message, type = 'success') {
                const notification = elements.notification;
                notification.textContent = message;
                notification.className = `notification ${type}`;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            },
            
            showLoading() {
                elements.loadingState.style.display = 'flex';
                elements.emptyState.style.display = 'none';
            },
            
            hideLoading() {
                elements.loadingState.style.display = 'none';
            },
            
            showEmptyState() {
                elements.emptyState.style.display = 'block';
            },
            
            hideEmptyState() {
                elements.emptyState.style.display = 'none';
            }
        };

        // æ•°æ®ç®¡ç†
        const dataManager = {
            getAllItems() {
                return [
                    ...mockData.submissions.map(item => ({ ...item, type: 'submission' })),
                    ...mockData.questions.map(item => ({ ...item, type: 'question' })),
                    ...mockData.feedback.map(item => ({ ...item, type: 'feedback' }))
                ];
            },
            
            filterItems(items, filter) {
                return items.filter(item => {
                    // ç±»å‹è¿‡æ»¤
                    if (filter.type !== 'all' && item.type !== filter.type) {
                        return false;
                    }
                    
                    // çŠ¶æ€è¿‡æ»¤
                    if (filter.status !== 'all' && item.status !== filter.status) {
                        return false;
                    }
                    
                    return true;
                }).sort((a, b) => {
                    // æ’åº
                    const dateA = new Date(a.createdAt);
                    const dateB = new Date(b.createdAt);
                    return filter.sort === 'newest' ? dateB - dateA : dateA - dateB;
                });
            },
            
            getStatusCount() {
                const items = this.getAllItems();
                return {
                    pending: items.filter(item => item.status === 'pending').length,
                    approved: items.filter(item => item.status === 'approved').length,
                    rejected: items.filter(item => item.status === 'rejected').length
                };
            }
        };

        // æ¸²æŸ“å‡½æ•°
        const renderer = {
            createReviewCard(item) {
                const card = document.createElement('div');
                card.className = `review-card ${item.status}`;
                card.dataset.id = item.id;
                card.dataset.type = item.type;
                
                const typeLabel = this.getTypeLabel(item.type);
                const statusLabel = this.getStatusLabel(item.status);
                
                card.innerHTML = `
                    <div class="review-header">
                        <div>
                            <span class="review-type ${item.type}">${typeLabel}</span>
                            ${item.category ? `<span style="margin-left: 8px; color: var(--text-muted);">${item.category}</span>` : ''}
                        </div>
                        <span class="review-status status-${item.status}">${statusLabel}</span>
                    </div>
                    <h3 class="review-title">${item.title || 'æ— æ ‡é¢˜'}</h3>
                    <div class="review-content">
                        ${item.content ? utils.truncateText(item.content) : 'æ— å†…å®¹'}
                        ${item.content && item.content.length > 200 ? '<button class="expand-btn">å±•å¼€æ›´å¤š</button>' : ''}
                    </div>
                    <div class="review-meta">
                        <span>ä½œè€…: ${item.author || item.authorName || 'åŒ¿å'}</span>
                        <span>${utils.formatDate(item.createdAt)}</span>
                    </div>
                    ${this.renderItemSpecificInfo(item)}
                    <div class="review-actions">
                        ${item.status === 'pending' ? `
                            <button class="action-btn approve-btn" data-action="approve">
                                <span>âœ“</span> é€šè¿‡
                            </button>
                            <button class="action-btn reject-btn" data-action="reject">
                                <span>âœ—</span> æ‹’ç»
                            </button>
                        ` : `
                            <button class="action-btn re-review-btn" data-action="re-review">
                                <span>â†»</span> é‡æ–°å®¡æ ¸
                            </button>
                        `}
                    </div>
                `;
                
                return card;
            },
            
            renderItemSpecificInfo(item) {
                let html = '';
                
                if (item.type === 'submission') {
                    html += `
                        <div style="display: flex; gap: 12px; margin-bottom: 12px; font-size: 13px;">
                            ${item.likeCount !== undefined ? `<span>â¤ï¸ ${item.likeCount} ç‚¹èµ</span>` : ''}
                            ${item.viewCount !== undefined ? `<span>ğŸ‘ï¸ ${item.viewCount} æµè§ˆ</span>` : ''}
                            ${item.difficulty ? `<span>ğŸ“Š éš¾åº¦: ${item.difficulty}</span>` : ''}
                        </div>
                    `;
                }
                
                if (item.tags && item.tags.length > 0) {
                    html += `<div style="display: flex; flex-wrap: wrap; gap: 4px; margin-bottom: 12px;">`;
                    item.tags.forEach(tag => {
                        html += `<span style="background: var(--accent-light); color: var(--accent-color); padding: 2px 8px; border-radius: 4px; font-size: 12px;">${tag}</span>`;
                    });
                    html += `</div>`;
                }
                
                return html;
            },
            
            getTypeLabel(type) {
                const labels = {
                    submission: 'æäº¤å†…å®¹',
                    question: 'é¢˜ç›®',
                    feedback: 'ç•™è¨€åé¦ˆ'
                };
                return labels[type] || type;
            },
            
            getStatusLabel(status) {
                const labels = {
                    pending: 'å¾…å®¡æ ¸',
                    approved: 'å·²é€šè¿‡',
                    rejected: 'å·²æ‹’ç»'
                };
                return labels[status] || status;
            },
            
            renderUserRow(user) {
                const row = document.createElement('tr');
                const initial = user.username.charAt(0).toUpperCase();
                
                row.innerHTML = `
                    <td>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div class="user-avatar">${initial}</div>
                            <div>
                                <div style="font-weight: 600;">${user.username}</div>
                                <div style="font-size: 12px; color: var(--text-muted);">ID: ${user.id}</div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span class="user-status ${user.isAdmin ? 'status-admin' : 'status-user'}">
                            ${user.isAdmin ? 'ç®¡ç†å‘˜' : 'æ™®é€šç”¨æˆ·'}
                        </span>
                    </td>
                    <td>${user.email}</td>
                    <td>${utils.formatDate(user.createdAt)}</td>
                    <td>
                        <button class="action-btn" style="padding: 6px 12px; font-size: 12px;" data-user-id="${user.id}" data-action="toggle-admin">
                            ${user.isAdmin ? 'æ’¤é”€ç®¡ç†å‘˜' : 'è®¾ä¸ºç®¡ç†å‘˜'}
                        </button>
                    </td>
                `;
                
                return row;
            },
            
            renderHistoryItem(history) {
                const item = document.createElement('div');
                item.className = 'history-item';
                
                const actionColor = history.action === 'approved' ? 'var(--success-color)' : 
                                 history.action === 'rejected' ? 'var(--danger-color)' : 'var(--warning-color)';
                
                item.innerHTML = `
                    <div class="history-header">
                        <div>
                            <strong>${history.itemTitle}</strong>
                            <span style="margin-left: 8px; font-size: 12px; color: var(--text-muted);">
                                ${this.getTypeLabel(history.itemType)}
                            </span>
                        </div>
                        <span style="color: ${actionColor}; font-weight: 600;">
                            ${history.action === 'approved' ? 'é€šè¿‡' : history.action === 'rejected' ? 'æ‹’ç»' : 'å¤å®¡'}
                        </span>
                    </div>
                    <div style="margin-bottom: 8px;">
                        <span style="font-size: 13px; color: var(--text-secondary);">å®¡æ ¸äºº: ${history.reviewer}</span>
                        <span style="margin-left: 12px; font-size: 13px; color: var(--text-secondary);">
                            ${utils.formatDate(history.reviewedAt)}
                        </span>
                    </div>
                    ${history.reason ? `<div style="font-size: 13px; color: var(--text-muted);">ç†ç”±: ${history.reason}</div>` : ''}
                `;
                
                return item;
            }
        };

        // äº‹ä»¶å¤„ç†å™¨
        const eventHandler = {
            init() {
                // æ ‡ç­¾é¡µåˆ‡æ¢
                elements.tabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        const tabId = tab.dataset.tab;
                        this.switchTab(tabId);
                    });
                });
                
                // ç­›é€‰å™¨å˜åŒ–
                elements.filterType.addEventListener('change', () => this.handleFilterChange());
                elements.filterStatus.addEventListener('change', () => this.handleFilterChange());
                elements.filterSort.addEventListener('change', () => this.handleFilterChange());
                
                // ç¡®è®¤å¯¹è¯æ¡†
                elements.cancelBtn.addEventListener('click', () => this.closeConfirmDialog());
                elements.confirmBtn.addEventListener('click', () => this.handleConfirmAction());
                
                // åˆå§‹åŠ è½½
                this.loadInitialData();
            },
            
            switchTab(tabId) {
                // æ›´æ–°æ´»åŠ¨æ ‡ç­¾
                elements.tabs.forEach(tab => {
                    tab.classList.toggle('active', tab.dataset.tab === tabId);
                });
                
                elements.tabContents.forEach(content => {
                    content.classList.toggle('active', content.id === `${tabId}-content`);
                });
                
                // æ›´æ–°çŠ¶æ€
                state.currentTab = tabId;
                
                // æ ¹æ®æ ‡ç­¾æ›´æ–°ç­›é€‰å™¨çŠ¶æ€
                if (tabId === 'pending') {
                    elements.filterStatus.value = 'pending';
                } else if (['submissions', 'questions', 'feedback'].includes(tabId)) {
                    elements.filterType.value = tabId.slice(0, -1);
                    elements.filterStatus.value = 'all';
                }
                
                // é‡æ–°åŠ è½½æ•°æ®
                this.handleFilterChange();
            },
            
            handleFilterChange() {
                state.currentFilter = {
                    type: elements.filterType.value,
                    status: elements.filterStatus.value,
                    sort: elements.filterSort.value
                };
                
                this.loadFilteredData();
            },
            
            async loadInitialData() {
                utils.showLoading();
                
                // æ¨¡æ‹ŸAPIå»¶è¿Ÿ
                await new Promise(resolve => setTimeout(resolve, 800));
                
                // åŠ è½½æ‰€æœ‰æ•°æ®
                state.allItems = dataManager.getAllItems();
                
                // æ›´æ–°ç»Ÿè®¡
                this.updateStats();
                
                // åŠ è½½åˆå§‹è§†å›¾
                this.loadFilteredData();
                
                // åŠ è½½ç”¨æˆ·æ•°æ®
                this.loadUsers();
                
                // åŠ è½½å®¡æ ¸å†å²
                this.loadReviewHistory();
                
                utils.hideLoading();
            },
            
            loadFilteredData() {
                const items = dataManager.filterItems(state.allItems, state.currentFilter);
                state.filteredItems = items;
                
                this.renderCurrentView();
            },
            
            renderCurrentView() {
                const containerId = `${state.currentTab}-content`;
                const container = document.getElementById(containerId.replace('-content', '-grid')) || 
                                document.getElementById(containerId.replace('-content', '-list'));
                
                if (!container) return;
                
                // æ¸…ç©ºå®¹å™¨
                if (container.innerHTML !== undefined) {
                    container.innerHTML = '';
                }
                
                // æ˜¾ç¤ºç©ºçŠ¶æ€
                if (state.filteredItems.length === 0) {
                    utils.showEmptyState();
                    return;
                }
                
                utils.hideEmptyState();
                
                // æ¸²æŸ“å†…å®¹
                if (state.currentTab === 'users') {
                    this.loadUsers();
                } else if (state.currentTab === 'history') {
                    this.loadReviewHistory();
                } else {
                    state.filteredItems.forEach(item => {
                        const card = renderer.createReviewCard(item);
                        container.appendChild(card);
                        
                        // æ·»åŠ äº‹ä»¶ç›‘å¬
                        this.addCardEventListeners(card);
                    });
                }
            },
            
            addCardEventListeners(card) {
                // å±•å¼€/æ”¶èµ·å†…å®¹
                const expandBtn = card.querySelector('.expand-btn');
                if (expandBtn) {
                    expandBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const content = card.querySelector('.review-content');
                        const isExpanded = content.classList.toggle('expanded');
                        expandBtn.textContent = isExpanded ? 'æ”¶èµ·' : 'å±•å¼€æ›´å¤š';
                    });
                }
                
                // æ“ä½œæŒ‰é’®
                const actionBtns = card.querySelectorAll('.action-btn');
                actionBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const action = btn.dataset.action;
                        const itemId = card.dataset.id;
                        const itemType = card.dataset.type;
                        
                        this.handleItemAction(action, itemId, itemType);
                    });
                });
            },
            
            handleItemAction(action, itemId, itemType) {
                const item = state.allItems.find(item => item.id === itemId);
                if (!item) return;
                
                switch (action) {
                    case 'approve':
                        this.showConfirmDialog(
                            'ç¡®è®¤é€šè¿‡',
                            `ç¡®å®šè¦é€šè¿‡"${item.title || 'è¯¥å†…å®¹'}"å—ï¼Ÿ`,
                            () => this.updateItemStatus(itemId, 'approved')
                        );
                        break;
                        
                    case 'reject':
                        this.showConfirmDialog(
                            'ç¡®è®¤æ‹’ç»',
                            `ç¡®å®šè¦æ‹’ç»"${item.title || 'è¯¥å†…å®¹'}"å—ï¼Ÿ`,
                            () => this.updateItemStatus(itemId, 'rejected')
                        );
                        break;
                        
                    case 're-review':
                        this.showConfirmDialog(
                            'é‡æ–°å®¡æ ¸',
                            `ç¡®å®šè¦å°†"${item.title || 'è¯¥å†…å®¹'}"é‡æ–°æ ‡è®°ä¸ºå¾…å®¡æ ¸å—ï¼Ÿ`,
                            () => this.updateItemStatus(itemId, 'pending')
                        );
                        break;
                }
            },
            
            updateItemStatus(itemId, newStatus) {
                const item = state.allItems.find(item => item.id === itemId);
                if (!item) return;
                
                const oldStatus = item.status;
                item.status = newStatus;
                
                // æ·»åŠ å®¡æ ¸å†å²
                mockData.reviewHistory.unshift({
                    id: `rev-${Date.now()}`,
                    itemId: itemId,
                    itemType: item.type,
                    itemTitle: item.title || 'æ— æ ‡é¢˜',
                    action: newStatus,
                    reviewer: state.currentUser.username,
                    reviewedAt: new Date().toISOString(),
                    reason: newStatus === 'approved' ? 'å†…å®¹ç¬¦åˆè¦æ±‚' : newStatus === 'rejected' ? 'å†…å®¹ä¸ç¬¦åˆè¦æ±‚' : 'é‡æ–°å®¡æ ¸'
                });
                
                // æ›´æ–°ç»Ÿè®¡
                this.updateStats();
                
                // é‡æ–°æ¸²æŸ“å½“å‰è§†å›¾
                this.loadFilteredData();
                
                // æ˜¾ç¤ºé€šçŸ¥
                utils.showNotification(
                    `å·²${newStatus === 'approved' ? 'é€šè¿‡' : newStatus === 'rejected' ? 'æ‹’ç»' : 'é‡æ–°å®¡æ ¸'}è¯¥å†…å®¹`,
                    newStatus === 'approved' ? 'success' : newStatus === 'rejected' ? 'error' : 'warning'
                );
                
                this.closeConfirmDialog();
            },
            
            loadUsers() {
                elements.usersTableBody.innerHTML = '';
                mockData.users.forEach(user => {
                    const row = renderer.renderUserRow(user);
                    elements.usersTableBody.appendChild(row);
                    
                    // æ·»åŠ äº‹ä»¶ç›‘å¬
                    const toggleBtn = row.querySelector('[data-action="toggle-admin"]');
                    if (toggleBtn) {
                        toggleBtn.addEventListener('click', () => {
                            this.handleToggleAdmin(user);
                        });
                    }
                });
                
                // æ›´æ–°ç”¨æˆ·ç»Ÿè®¡
                elements.stats.users.textContent = mockData.users.length;
            },
            
            handleToggleAdmin(user) {
                if (user.id === 'admin-001') {
                    utils.showNotification('æ— æ³•ä¿®æ”¹è‡ªå·±çš„ç®¡ç†å‘˜æƒé™', 'error');
                    return;
                }
                
                this.showConfirmDialog(
                    user.isAdmin ? 'æ’¤é”€ç®¡ç†å‘˜' : 'è®¾ä¸ºç®¡ç†å‘˜',
                    `ç¡®å®šè¦${user.isAdmin ? 'æ’¤é”€' : 'è®¾ç½®'}ç”¨æˆ·"${user.username}"çš„ç®¡ç†å‘˜æƒé™å—ï¼Ÿ`,
                    () => {
                        user.isAdmin = !user.isAdmin;
                        this.loadUsers();
                        utils.showNotification(
                            `å·²${user.isAdmin ? 'è®¾ä¸º' : 'æ’¤é”€'}ç®¡ç†å‘˜æƒé™`,
                            'success'
                        );
                    }
                );
            },
            
            loadReviewHistory() {
                elements.historyList.innerHTML = '';
                mockData.reviewHistory.forEach(history => {
                    const item = renderer.renderHistoryItem(history);
                    elements.historyList.appendChild(item);
                });
            },
            
            updateStats() {
                const counts = dataManager.getStatusCount();
                elements.stats.pending.textContent = counts.pending;
                elements.stats.approved.textContent = counts.approved;
                elements.stats.rejected.textContent = counts.rejected;
            },
            
            showConfirmDialog(title, message, callback) {
                elements.confirmTitle.textContent = title;
                elements.confirmMessage.textContent = message;
                elements.confirmDialog.classList.add('active');
                
                // å­˜å‚¨å›è°ƒå‡½æ•°
                elements.confirmBtn.onclick = () => {
                    callback();
                };
            },
            
            closeConfirmDialog() {
                elements.confirmDialog.classList.remove('active');
                elements.confirmBtn.onclick = null;
            },
            
            handleConfirmAction() {
                // å…·ä½“é€»è¾‘åœ¨showConfirmDialogä¸­è®¾ç½®
            }
        };

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            eventHandler.init();
            
            // æ·»åŠ ä¸€äº›é”®ç›˜å¿«æ·é”®
            document.addEventListener('keydown', (e) => {
                // ESCå…³é—­å¯¹è¯æ¡†
                if (e.key === 'Escape' && elements.confirmDialog.classList.contains('active')) {
                    eventHandler.closeConfirmDialog();
                }
                
                // Ctrl+Fèšç„¦ç­›é€‰å™¨
                if (e.ctrlKey && e.key === 'f') {
                    e.preventDefault();
                    elements.filterType.focus();
                }
            });
        });

        // æ¨¡æ‹Ÿä¸Supabaseçš„äº¤äº’ï¼ˆæ³¨é‡Šæ‰çš„ä»£ç ï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦æ ¹æ®æ‚¨çš„é…ç½®è°ƒæ•´ï¼‰
        /*
        // è¿æ¥Supabase
        const supabaseUrl = 'YOUR_SUPABASE_URL';
        const supabaseKey = 'YOUR_SUPABASE_KEY';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä¸ºç®¡ç†å‘˜
        async function checkAdminStatus() {
            const { data: { user } } = await supabase.auth.getUser();
            
            if (!user) {
                window.location.href = '/login';
                return;
            }

            const { data: profile } = await supabase
                .from('profiles')
                .select('is_admin')
                .eq('auth_id', user.id)
                .single();

            if (!profile?.is_admin) {
                window.location.href = '/';
                return;
            }

            state.currentUser.id = user.id;
            state.currentUser.email = user.email;
            
            // è·å–ç”¨æˆ·ä¿¡æ¯
            const { data: userProfile } = await supabase
                .from('profiles')
                .select('username, is_admin')
                .eq('auth_id', user.id)
                .single();

            if (userProfile) {
                state.currentUser.username = userProfile.username;
            }
        }

        // åŠ è½½å¾…å®¡æ ¸å†…å®¹
        async function loadPendingContent() {
            // åŠ è½½submissions
            const { data: submissions } = await supabase
                .from('submissions')
                .select('*')
                .eq('status', 'pending')
                .order('created_at', { ascending: false });

            // åŠ è½½questions
            const { data: questions } = await supabase
                .from('questions')
                .select('*')
                .eq('status', 'pending')
                .order('created_at', { ascending: false });

            // åŠ è½½feedback
            const { data: feedback } = await supabase
                .from('feedbacks')
                .select('*')
                .eq('status', 'pending')
                .order('created_at', { ascending: false });

            return { submissions, questions, feedback };
        }

        // æ›´æ–°å†…å®¹çŠ¶æ€
        async function updateContentStatus(table, id, status) {
            const { error } = await supabase
                .from(table)
                .update({ status, updated_at: new Date().toISOString() })
                .eq('id', id);

            if (error) {
                console.error('æ›´æ–°çŠ¶æ€å¤±è´¥:', error);
                return false;
            }

            // æ·»åŠ å®¡æ ¸è®°å½•
            await supabase
                .from('submission_reviews') // å‡è®¾æœ‰å®¡æ ¸è®°å½•è¡¨
                .insert({
                    submission_id: id,
                    reviewer_id: state.currentUser.id,
                    status: status,
                    reviewed_at: new Date().toISOString()
                });

            return true;
        }

        // åŠ è½½æ‰€æœ‰ç”¨æˆ·
        async function loadAllUsers() {
            const { data: users } = await supabase
                .from('profiles')
                .select('*')
                .order('created_at', { ascending: false });

            return users || [];
        }

        // æ›´æ–°ç”¨æˆ·æƒé™
        async function updateUserAdminStatus(userId, isAdmin) {
            const { error } = await supabase
                .from('profiles')
                .update({ is_admin: isAdmin })
                .eq('id', userId);

            return !error;
        }
        */
    </script>
</body>
</html>
